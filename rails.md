### @変数
- 通常、アクションで定義した変数をビューで使用することはできないが、変数名を「@」から始めることでこの変数は特殊な変数となり、ビューファイルでも使用することができる

### モデル
-　ApplicationRecordクラスを継承したクラスをモデルと呼ぶ。継承していることによりsaveメソッドを始めとした各メソッドが使用可能

- ルーティングは合致するURLを上から順に探すので、記載する順番に注意が必要
- form_tagメソッドを用いると、フォームに入力されたデータを送信することができまる。form_tagは、「form_tag(送信先のURL) do」のように送信先のURLを指定する。
これによって、<input type="submit" ...>のボタンを押した時に、指定されたURLにデータが送信される仕組み。
- createアクションは対応するviewを用意する代わりに「リダイレクト」という他のURLに転送する手法を使う（redirect toメソッド）
- textareaタグにname属性を指定すると、入力データを送信することができるようになり、name属性の値をキーとしたハッシュがRails側に送られるようになる
- name属性を指定したフォームに入力されたデータは、コントローラのアクション内で受け取ることが可能になる。
- フォームのデータは、変数pramasで受け取る。paramsはname属性に設定した文字列をキーとしたハッシュになっている
![スクリーンショット 2023-12-30 9 59 04](https://github.com/ti-hiro/TIL/assets/154767207/25ab66de-d522-4737-9853-69623f5b83f3)
### 変数paramsのまとめ
- params[:◯◯]で取得できる！
1. 「:◯◯」を使ったルーティングのURLから値を取得する
2. 「name="◯◯"」がついたフォームの入力内容を受け取る

### バリデーション
- 不正なデータがデータベースに保存されないように、データをチェックする仕組みのことをバリデーションと言う。バリデーションに引っかかった場合（不正なデータの場合）にはデータベースに保存されない。
- バリデーションは、modelで設定する
- バリデーションで検証ｓうる内容は、ハッシュとなっておりカンマで区切ることで複数指定できる
```
validates :検証するカラム名, {presence: true]
```
- 値が存在しているかだけでなく、文字数もチェック（制限）することができる
- 最大文字数を設定するには、lengthを使用して、{maximum: 数値}を指定
- saveメソッドは、保存に成功した場合は「true」を、バリデーションに引っかかって保存に失敗した場合は「false」を戻り値として返す
![スクリーンショット 2023-12-31 18 42 19](https://github.com/ti-hiro/TIL/assets/154767207/56e7319e-ab6f-41d6-8008-dd9773cbfc2a)
- saveメソッドを呼び出した際にバリデーションに失敗すると、Railsでは自動的にエラーメッセージが生成されるようになっている
- ページ上に1度だけ表示されるメッセージをフラッシュという。フラッシュが表示された後、ページを更新したり、別のページに移動したりすると、フラッシュは表示されなくなる。
###　変数flash
- Railsではフラッシュを表示するために、特殊な変数flashが用意されている
- アクションで変数flash[:notice]に文字列を代入すると、flash[:notice]をビューで使うことができる
- 変数flashは１度表示された後に自動で削除される
- flashはいろいろな箇所で共通で使っていくのでapplication.html.erbに書く

![スクリーンショット 2023-12-31 20 23 27](https://github.com/ti-hiro/TIL/assets/154767207/e773dc28-6776-4bbb-ac02-c2bc26b36fa1)

- <input>タグに「type="file"」を追加することで、右の図のように画像ファイルを選択するボタンを表示することが出来る
- 画像の送信は特殊なので、form_tagに{multipart: true}を追加する必要がある

### 変数session
- ページを移動してもユーザー情報を保持し続けるために、sessionという特殊な変数を使用する
- sessionに代入された値は、ブラウザ(InternetExplorer, GoogleChrome等)に保存される
- sessionに値を代入すると、ブラウザはそれ以降のアクセスでsessionの値をRailsに送信する

![スクリーンショット 2024-01-01 18 52 28](https://github.com/ti-hiro/TIL/assets/154767207/da8cfe45-4ef2-49eb-942f-a7d6f9286979)

- ある条件に合致する「複数の」データを取得するには、whereメソッドを使用する（find_byメソッドで取得できるのは1件のみ）
- インスタンスメソッド内で、selfはそのインスタンス自身を指す（インスタンスメソッドは、インスタンスに対して呼び出すメソッドでモデル内に定義できる）
- HTML要素に対してlink_toメソッドを使うには、少し異なる書き方をする必要があり
  - <%= link_to(URL) do %>と<% end %>の間にHTML要素を書くことで、その部分をリンクにすることができる
